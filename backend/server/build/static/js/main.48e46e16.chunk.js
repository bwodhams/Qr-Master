(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,n,t){},178:function(e,n,t){},180:function(e,n,t){"use strict";t.r(n);var a=t(0),l=t.n(a),c=t(83),o=t.n(c),i=(t(176),t(30)),r=t(31),s=t(34),u=t(32),d=t(33),h=(t(178),t(6)),m=function(e){return e.selectedUser?l.a.createElement("div",null,l.a.createElement("div",{className:"editfields"},l.a.createElement("div",null,l.a.createElement("label",null,"email: "),e.addingUser?l.a.createElement("input",{name:"email",placeholder:"email",value:e.selectedUser.email,onChange:e.onChange}):l.a.createElement("label",{className:"value"},e.selectedUser.email)),l.a.createElement("div",null,l.a.createElement("label",null,"name: "),l.a.createElement("input",{name:"name",value:e.selectedUser.name,placeholder:"name",onChange:e.onChange})),l.a.createElement("div",null,l.a.createElement("label",null,"Password: "),l.a.createElement("input",{type:"password",secureTextEntry:!0,name:"passwordHash",onChange:e.onChange}))),l.a.createElement("button",{onClick:e.onCancel},"Cancel"),l.a.createElement("button",{onClick:e.onSave},"Save")):l.a.createElement("div",null)},g=function(e){return e.startLogin?l.a.createElement("div",null,l.a.createElement("div",{className:"editfields"},l.a.createElement("div",null,l.a.createElement("label",null,"Email: "),l.a.createElement("input",{id:"inputEmail",name:"email"})),l.a.createElement("div",null,l.a.createElement("label",null,"Password: "),l.a.createElement("input",{id:"inputPassword",type:"password",secureTextEntry:!0,name:"passwordHash"}))),l.a.createElement("button",{onClick:e.onCancel},"Cancel"),l.a.createElement("button",{onClick:function(n){return e.onLogin(n,document.getElementById("inputEmail").value,document.getElementById("inputPassword").value)}},"Login")):null===e.loggedIn||void 0===e.loggedIn?l.a.createElement("div",null):e.loggedIn?l.a.createElement("h2",null,"You have logged in successfully!"):e.loggedIn?l.a.createElement("div",null):l.a.createElement("h2",null,"You are not logged in!")},f=function(e){return l.a.createElement("li",{onClick:function(){return e.onSelect(e.user)},className:e.user===e.selectedUser?"selected":""},l.a.createElement("button",{className:"delete-button",onClick:function(n){return e.onDelete(n,e.user)}},"Delete"),l.a.createElement("div",{className:"user-element"},l.a.createElement("div",{className:"badge"},e.user.email),l.a.createElement("div",{className:"name"},e.user.name)))},v={get:function(){return new Promise(function(e,n){fetch("".concat("/api","/users")).then(function(e){return e.json()}).then(function(n){return e(n)}).catch(function(e){n(e)})})},create:function(e){return new Promise(function(n,t){fetch("".concat("/api","/user"),{method:"PUT",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(e){t(e)})})},update:function(e){return new Promise(function(n,t){fetch("".concat("/api","/user"),{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){n(e)}).catch(function(e){t(e)})})},destroy:function(e){return console.log(e),new Promise(function(n,t){fetch("".concat("/api","/user/").concat(e.email),{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(e){t(e)})})},login:function(e,n){return new Promise(function(t,a){fetch("".concat("/api","/user/").concat(e,"&").concat(n)).then(function(e){return e.json()}).then(function(e){return t(e)}).catch(function(e){a(e)})})}},E=function(e){function n(){var e;return Object(i.a)(this,n),(e=Object(s.a)(this,Object(u.a)(n).call(this))).state={users:[],creatingUser:!1},e.handleEnableAddMode=e.handleEnableAddMode.bind(Object(h.a)(Object(h.a)(e))),e.handleSave=e.handleSave.bind(Object(h.a)(Object(h.a)(e))),e.handleOnChange=e.handleOnChange.bind(Object(h.a)(Object(h.a)(e))),e.handleBeginLogin=e.handleBeginLogin.bind(Object(h.a)(Object(h.a)(e))),e.handleLogin=e.handleLogin.bind(Object(h.a)(Object(h.a)(e))),e.handleDelete=e.handleDelete.bind(Object(h.a)(Object(h.a)(e))),e.handleCancel=e.handleCancel.bind(Object(h.a)(Object(h.a)(e))),e.handleSelect=e.handleSelect.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(n,e),Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.get().then(function(n){return e.setState({users:n})})}},{key:"handleSelect",value:function(e){this.setState({selectedUser:e})}},{key:"handleBeginLogin",value:function(){this.setState({startLogin:!0,loggedIn:null})}},{key:"handleLogin",value:function(e,n,t){var a=this;e.stopPropagation(),v.login(n,t).then(function(e){a.setState({startLogin:!1}),!0===e.loggedIn?a.setState({loggedIn:!0}):a.setState({loggedIn:!1}),console.log(e.message)})}},{key:"handleDelete",value:function(e,n){var t=this;e.stopPropagation(),v.destroy(n).then(function(){var e=t.state.users;e=e.filter(function(e){return e!==n}),t.setState({users:e}),t.selectedUser===n&&t.setState({selectedUser:null})})}},{key:"handleEnableAddMode",value:function(){this.setState({addingUser:!0,selectedUser:{id:"",name:"",emailVerifCode:""}})}},{key:"handleCancel",value:function(){this.setState({addingUser:!1,selectedUser:null,startLogin:!1})}},{key:"handleSave",value:function(){var e=this,n=this.state.users;this.state.addingUser?v.create(this.state.selectedUser).then(function(t){!0===t.accountCreated?(console.log("Successfully created!"),console.log(t.message),n.push(e.state.selectedUser),e.setState({users:n,selectedUser:null,addingUser:!1})):console.log(t.message)}).catch(function(e){console.log(e)}):v.update(this.state.selectedUser).then(function(){e.setState({selectedUser:null})}).catch(function(e){})}},{key:"handleOnChange",value:function(e){var n=this.state.selectedUser;n[e.target.name]=e.target.value,this.setState({selectedUser:n})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("ul",{className:"users"},this.state.users.map(function(n){return l.a.createElement(f,{key:n.email,user:n,onSelect:e.handleSelect,onDelete:e.handleDelete,onLogin:e.handleLogin,selectedUser:e.state.selectedUser})})),l.a.createElement("div",{className:"editarea"},l.a.createElement("button",{onClick:this.handleEnableAddMode},"Register New Account"),l.a.createElement("button",{onClick:this.handleBeginLogin},"Login to Account"),l.a.createElement(m,{addingUser:this.state.addingUser,onChange:this.handleOnChange,selectedUser:this.state.selectedUser,onSave:this.handleSave,onCancel:this.handleCancel}),l.a.createElement(g,{startLogin:this.state.startLogin,loggedIn:this.state.loggedIn,onLogin:this.handleLogin,onCancel:this.handleCancel})))}}]),n}(a.Component),p=function(e){function n(){return Object(i.a)(this,n),Object(s.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(r.a)(n,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"QRCodes4Good Registered Accounts"),l.a.createElement("div",{className:"header-bar"}),l.a.createElement("app-users",null),l.a.createElement(E,null))}}]),n}(a.Component),b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(l.a.createElement(p,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");b?function(e){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):w(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):w(e)})}}()},84:function(e,n,t){e.exports=t(180)}},[[84,2,1]]]);
//# sourceMappingURL=main.48e46e16.chunk.js.map